using System.Collections.Generic;
using UnityEngine;

/// <summary>
/// ScriptableObject-based event channel for decoupled communication.
/// Allows systems to communicate without direct references.
/// Generated by Unity-AI-Forge.
/// </summary>
[CreateAssetMenu(menuName = "GameKit/Event Channel/{{EVENT_TYPE_LABEL}}", fileName = "{{CLASS_NAME}}")]
public class {{CLASS_NAME}} : ScriptableObject
{
    [Header("Identity")]
    [SerializeField] private string dataId = "{{DATA_ID}}";

    #if UNITY_EDITOR
    [TextArea(2, 5)]
    [SerializeField] private string description = "{{DESCRIPTION}}";
    #endif

    private readonly List<System.Action{{EVENT_TYPE_GENERIC}}> listeners = new List<System.Action{{EVENT_TYPE_GENERIC}}>();

    public string DataId => dataId;

    /// <summary>
    /// Register a listener for this event channel.
    /// </summary>
    public void Register(System.Action{{EVENT_TYPE_GENERIC}} listener)
    {
        if (!listeners.Contains(listener))
            listeners.Add(listener);
    }

    /// <summary>
    /// Unregister a listener from this event channel.
    /// </summary>
    public void Unregister(System.Action{{EVENT_TYPE_GENERIC}} listener)
    {
        listeners.Remove(listener);
    }

    /// <summary>
    /// Raise the event, notifying all registered listeners.
    /// </summary>
    public void Raise({{EVENT_TYPE_PARAM}})
    {
        for (int i = listeners.Count - 1; i >= 0; i--)
        {
            listeners[i]?.Invoke({{EVENT_TYPE_ARG}});
        }
    }

    /// <summary>
    /// Clear all listeners. Useful for cleanup.
    /// </summary>
    public void Clear()
    {
        listeners.Clear();
    }
}

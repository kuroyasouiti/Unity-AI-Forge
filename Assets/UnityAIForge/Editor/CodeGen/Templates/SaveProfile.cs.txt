using System.Collections.Generic;
using UnityEngine;

/// <summary>
/// Save configuration profile defining what data to persist and auto-save settings.
/// Generated by Unity-AI-Forge.
/// </summary>
[CreateAssetMenu(menuName = "Game/{{CLASS_NAME}}", fileName = "New{{CLASS_NAME}}")]
public class {{CLASS_NAME}} : ScriptableObject
{
    #region Types

    public enum SaveTargetType
    {
        Transform,
        Component,
        ResourceManager,
        Health,
        SceneFlow,
        Inventory,
        PlayerPrefs
    }

    [System.Serializable]
    public class SaveTarget
    {
        public SaveTargetType type;
        public string saveKey;
        public string gameObjectPath;
        public bool savePosition = true;
        public bool saveRotation;
        public bool saveScale;
        public string componentType;
        public List<string> properties = new List<string>();
        public string resourceManagerId;
        public string healthId;
        public string sceneFlowId;
        public string inventoryId;
    }

    [System.Serializable]
    public class AutoSaveSettings
    {
        public bool enabled;
        public float intervalSeconds = 60f;
        public bool onSceneChange;
        public bool onApplicationPause = true;
        public string autoSaveSlotId = "autosave";
    }

    #endregion

    [Header("Identity")]
    public string profileId = "{{PROFILE_ID}}";

    [Header("Save Targets")]
    public List<SaveTarget> saveTargets = new List<SaveTarget>();

    [Header("Auto-Save")]
    public AutoSaveSettings autoSave = new AutoSaveSettings();

    #region API

    public void AddTarget(SaveTarget target)
    {
        if (target != null) saveTargets.Add(target);
    }

    public void RemoveTarget(string saveKey)
    {
        saveTargets.RemoveAll(t => t.saveKey == saveKey);
    }

    public void ClearTargets()
    {
        saveTargets.Clear();
    }

    public SaveTarget GetTarget(string saveKey)
    {
        return saveTargets.Find(t => t.saveKey == saveKey);
    }

    #endregion
}
